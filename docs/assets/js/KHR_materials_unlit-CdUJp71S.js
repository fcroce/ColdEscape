import{au as d,C as l,a6 as u,a7 as p}from"./index-DXpZD1cJ.js";import{G as h}from"./glTFLoader-DgruNNX3.js";import"./glTFLoaderAnimation-DxXjyyZu.js";const t="KHR_materials_unlit";class c{constructor(r){this.name=t,this.order=210,this._loader=r,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,o,e){return h.LoadExtensionAsync(r,o,this.name,()=>this._loadUnlitPropertiesAsync(r,o,e))}_loadUnlitPropertiesAsync(r,o,e){if(!(e instanceof d))throw new Error(`${r}: Material type not supported`);const n=new Array;e.unlit=!0;const s=o.pbrMetallicRoughness;return s&&(s.baseColorFactor?(e.albedoColor=l.FromArray(s.baseColorFactor),e.alpha=s.baseColorFactor[3]):e.albedoColor=l.White(),s.baseColorTexture&&n.push(this._loader.loadTextureInfoAsync(`${r}/baseColorTexture`,s.baseColorTexture,a=>{a.name=`${e.name} (Base Color)`,e.albedoTexture=a}))),o.doubleSided&&(e.backFaceCulling=!1,e.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(r,o,e),Promise.all(n).then(()=>{})}}u(t);p(t,!0,i=>new c(i));export{c as KHR_materials_unlit};
